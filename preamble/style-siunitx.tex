\IfDefined{sisetup}{%

%  detect-family,
%  detect-weight,  

\sisetup{%
  locale=DE,
  mode = math, % text is printed using a math font
  detect-all,
  separate-uncertainty=true,
  math-micro=\text{µ},
  text-micro=µ,
  exponent-product = \cdot,
  number-unit-separator=\text{\,},
  output-decimal-marker={\text{,}},
  range-phrase=-,
}

\let\nicefrac\sfrac

% Emulate units package, sort of
\NewDocumentCommand\unit{om}{%
  \IfNoValueTF{#1}
    {\si{#2}}
    {\SI{#1}{#2}}%
}
\NewDocumentCommand\unitfrac{omm}{%
  \IfNoValueTF{#1}
    {\si{\sfrac{#2}{#3}}}
    {\SI{#1}{\sfrac{#2}{#3}}}%
}

} % end: \IfDefined
